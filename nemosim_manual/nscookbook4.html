
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>NEMOSIM - Cook book (4) &#8212; nemosim 1.0 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="NEMOSIM - Cook book (5)" href="nscookbook5.html" />
    <link rel="prev" title="NEMOSIM - Cook book (3)" href="nscookbook3.html" /> 
  </head><body>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="index.html"><img src="_images/NEMO-Website.png" border="0" alt="nemosim"/></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="nscookbook5.html" title="NEMOSIM - Cook book (5)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="nscookbook3.html" title="NEMOSIM - Cook book (3)"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">home</a>|&nbsp;</li>
        <li><a href="search.html">search</a>|&nbsp;</li>
       <li><a href="contents.html">documentation </a> &raquo;</li>
 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">NEMOSIM - Cook book (4)</a><ul>
<li><a class="reference internal" href="#controlling-the-layout">Controlling the layout</a></li>
<li><a class="reference internal" href="#overview-of-options-used">1. Overview of options used</a></li>
<li><a class="reference internal" href="#determining-current-settings">2. Determining current settings</a></li>
<li><a class="reference internal" href="#matching-settings-to-command-line-options">3. Matching settings to command-line options</a></li>
<li><a class="reference internal" href="#setting-margins">4. Setting margins</a></li>
<li><a class="reference internal" href="#using-scale-margins-to-control-colourbars">5. Using scale margins to control colourbars</a></li>
<li><a class="reference internal" href="#label-placement-and-text-justification">6. Label placement and text justification</a></li>
<li><a class="reference internal" href="#text-fonts">7. Text fonts</a></li>
<li><a class="reference internal" href="#logo-placement-and-sizing">8. Logo placement and sizing</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="nscookbook3.html"
                        title="previous chapter">NEMOSIM - Cook book (3)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="nscookbook5.html"
                        title="next chapter">NEMOSIM - Cook book (5)</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/nscookbook4.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="nemosim-cook-book-4">
<span id="nscookbook4"></span><h1>NEMOSIM - Cook book (4)<a class="headerlink" href="#nemosim-cook-book-4" title="Permalink to this headline">¶</a></h1>
<div class="section" id="controlling-the-layout">
<h2>Controlling the layout<a class="headerlink" href="#controlling-the-layout" title="Permalink to this headline">¶</a></h2>
<p>Most of the examples so far have relied on the default settings for many of the layout
parameters.  The results are reasonable but there is scope for refining images further by
exercising control over settings such as:</p>
<ul class="simple">
<li>Individual margin widths and heights</li>
<li>Position and width of colourbars</li>
<li>Position, size and font of text labels and titles</li>
<li>Inclusion, placement and size of optional logo image</li>
<li>Inclusion, placement and size of optional date-clock</li>
</ul>
<p>This chapter is dedicated to explaining the layout controls and how to alter their settings.
The explanation will be based on an examination of this image and its variants:</p>
<a class="reference internal image-reference" href="_images/example12a.png"><img alt="_images/example12a.png" class="align-center" src="_images/example12a.png" style="width: 580.0px; height: 396.0px;" /></a>
<p>which was produced by this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">nemosim</span> <span class="o">-</span><span class="n">f</span> <span class="o">./</span><span class="n">data</span><span class="o">/</span><span class="n">ORCA025_2001m01I</span><span class="o">.</span><span class="n">nc</span> <span class="o">-</span><span class="n">o</span> <span class="n">example12a</span><span class="o">.</span><span class="n">png</span> <span class="o">-</span><span class="n">d</span> <span class="n">isstempe</span> <span class="o">-</span><span class="n">r</span> <span class="mi">880</span> <span class="mi">640</span> \
          <span class="o">-</span><span class="n">nomask</span> <span class="o">-</span><span class="n">show</span> <span class="o">-</span><span class="n">spos</span> <span class="mi">1</span> <span class="o">-</span><span class="n">stitle</span> <span class="n">SST</span> <span class="o">-</span><span class="n">title</span> <span class="s2">&quot;Sea Surface Temperature with sea ice&quot;</span> \
          <span class="o">-</span><span class="n">d2</span> <span class="n">ileadfra</span> <span class="o">-</span><span class="n">limits2</span> <span class="mf">0.0</span> <span class="mf">0.8</span> <span class="o">-</span><span class="n">overlay</span> <span class="o">-</span><span class="n">bbg</span> <span class="c1">#a6a6a6 -stitle2 &quot;ice conc.&quot; \</span>
          <span class="o">-</span><span class="n">logo</span> <span class="o">./</span><span class="n">data</span><span class="o">/</span><span class="n">NOC_logo</span><span class="o">.</span><span class="n">png</span> <span class="o">-</span><span class="n">lsize</span> <span class="mi">158</span> <span class="mi">50</span> <span class="o">-</span><span class="n">lpos</span> <span class="mi">5</span> <span class="mi">5</span> <span class="o">-</span><span class="n">tfnt</span> <span class="s2">&quot;Handwriting---Dakota&quot;</span>
</pre></div>
</div>
<p>Several new elements have been introduced here so that the finer control over their
appearance and placement can be discussed. The next section briefly describes the new
elements.</p>
</div>
<div class="section" id="overview-of-options-used">
<h2>1. Overview of options used<a class="headerlink" href="#overview-of-options-used" title="Permalink to this headline">¶</a></h2>
<p>This example has:</p>
<ul class="simple">
<li>Set explicit titles for each colourbar (<code class="docutils literal notranslate"><span class="pre">-stitle</span></code> and <code class="docutils literal notranslate"><span class="pre">-stitle2</span></code> respectively)</li>
<li>Set an explicit plot title (<code class="docutils literal notranslate"><span class="pre">-title</span></code>)</li>
<li>Set border background colour to a mid-gray (<code class="docutils literal notranslate"><span class="pre">-bbg</span></code>)</li>
<li>Requested the inclusion of a logo image (<code class="docutils literal notranslate"><span class="pre">-logo</span></code>)</li>
<li>Set and explicit size for the logo (<code class="docutils literal notranslate"><span class="pre">-lsize</span></code>)</li>
<li>Positioned the logo explicitly (<code class="docutils literal notranslate"><span class="pre">-lpos</span></code>)</li>
<li>Requested a particular font for the plot title (<code class="docutils literal notranslate"><span class="pre">-tfnt</span></code>)</li>
</ul>
<p>Note that string arguments containing spaces or dashes must be quoted. The fonts available
can be listed using the <cite>ImageMagick</cite> <code class="docutils literal notranslate"><span class="pre">identify</span></code> utility. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">identify</span> <span class="o">-</span><span class="nb">list</span> <span class="n">font</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">Font</span> <span class="o">|</span> <span class="n">grep</span> <span class="o">-</span><span class="n">v</span> <span class="n">glyphs</span>
</pre></div>
</div>
<p>should produce an uncluttered list. The aspect ratio of the logo will be preserved so the
resultant logo size will be determined by the limiting dimension. In this case the logo
source image is: 511x113 so the requested size of 158x50 will provide a 158x35 pixel-sized
image.</p>
<p>Apart from the logo placement, there are no explicit layout instructions given. To
understand how the default layout is determined it is necessary to review the internal
data structures, how the program variables relate to the layout and how default values
are computed.</p>
</div>
<div class="section" id="determining-current-settings">
<h2>2. Determining current settings<a class="headerlink" href="#determining-current-settings" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">-info</span></code> option can be used to display the key internal data structures. For the
current exercise only the first section (relating to the image control structure) of the
output written to standard out is relevant:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">nemosim</span> <span class="o">-</span><span class="k">as</span> <span class="n">example12a</span><span class="o">.</span><span class="n">png</span> <span class="o">-</span><span class="n">info</span>


<span class="o">=====================================================================================</span>
<span class="o">==</span> <span class="n">Details</span> <span class="n">of</span> <span class="n">internal</span> <span class="n">image</span> <span class="n">control</span> <span class="n">structure</span> <span class="p">(</span><span class="n">im</span> <span class="n">of</span> <span class="nb">type</span> <span class="n">canvas</span><span class="p">):</span>                <span class="o">==</span>
<span class="o">==</span>         <span class="n">warning</span><span class="p">:</span> <span class="n">long</span> <span class="n">strings</span> <span class="n">may</span> <span class="n">be</span> <span class="n">truncated</span> <span class="n">to</span> <span class="mi">48</span> <span class="n">characters</span>                 <span class="o">==</span>
<span class="o">=====================================================================================</span>
           <span class="n">wi</span>  <span class="o">=</span>                     <span class="n">pixel</span> <span class="n">width</span>  <span class="n">main</span> <span class="n">drawing</span> <span class="n">area</span>    <span class="mi">880</span>
           <span class="n">ht</span>  <span class="o">=</span>                     <span class="n">pixel</span> <span class="n">height</span> <span class="n">main</span> <span class="n">drawing</span> <span class="n">area</span>    <span class="mi">640</span>
           <span class="n">bl</span>  <span class="o">=</span>            <span class="n">pixel</span> <span class="n">width</span>  <span class="n">of</span> <span class="n">additional</span> <span class="n">left</span>  <span class="n">margin</span>    <span class="mi">140</span>
           <span class="n">br</span>  <span class="o">=</span>            <span class="n">pixel</span> <span class="n">width</span>  <span class="n">of</span> <span class="n">additional</span> <span class="n">right</span> <span class="n">margin</span>    <span class="mi">140</span>
           <span class="n">bb</span>  <span class="o">=</span>            <span class="n">pixel</span> <span class="n">height</span> <span class="n">of</span> <span class="n">additional</span> <span class="n">base</span>  <span class="n">margin</span>     <span class="mi">76</span>
           <span class="n">bt</span>  <span class="o">=</span>            <span class="n">pixel</span> <span class="n">height</span> <span class="n">of</span> <span class="n">additional</span> <span class="n">top</span>   <span class="n">margin</span>     <span class="mi">76</span>
           <span class="n">sbl</span> <span class="o">=</span>                 <span class="n">pixel</span> <span class="n">width</span>  <span class="n">of</span> <span class="n">scale</span> <span class="n">left</span>  <span class="n">margin</span>     <span class="mi">28</span>
           <span class="n">sbr</span> <span class="o">=</span>                 <span class="n">pixel</span> <span class="n">width</span>  <span class="n">of</span> <span class="n">scale</span> <span class="n">right</span> <span class="n">margin</span>     <span class="mi">98</span>
           <span class="n">sbb</span> <span class="o">=</span>                 <span class="n">pixel</span> <span class="n">height</span> <span class="n">of</span> <span class="n">scale</span> <span class="n">base</span>  <span class="n">margin</span>     <span class="mi">76</span>
           <span class="n">sbt</span> <span class="o">=</span>                 <span class="n">pixel</span> <span class="n">height</span> <span class="n">of</span> <span class="n">scale</span> <span class="n">top</span>   <span class="n">margin</span>    <span class="mi">228</span>
          <span class="n">spos</span> <span class="o">=</span>  <span class="n">scale</span> <span class="n">position</span><span class="p">,</span> <span class="n">may</span> <span class="ow">not</span> <span class="n">match</span> <span class="nb">input</span> <span class="k">if</span> <span class="n">overlaying</span>      <span class="mi">2</span>
          <span class="n">tfs</span>  <span class="o">=</span>                           <span class="n">title</span> <span class="n">font</span> <span class="n">size</span> <span class="p">(</span><span class="n">points</span><span class="p">)</span>     <span class="mi">30</span>
          <span class="n">tpx</span>  <span class="o">=</span>                             <span class="n">title</span> <span class="n">x</span><span class="o">-</span><span class="n">pixel</span> <span class="n">position</span>    <span class="mi">580</span>
          <span class="n">tpy</span>  <span class="o">=</span>                             <span class="n">title</span> <span class="n">y</span><span class="o">-</span><span class="n">pixel</span> <span class="n">position</span>     <span class="mi">19</span>
          <span class="n">tjs</span>  <span class="o">=</span>                               <span class="n">title</span> <span class="n">justification</span>       <span class="mi">8</span>
          <span class="n">stfs</span> <span class="o">=</span>                     <span class="n">scale</span> <span class="n">title</span> <span class="n">font</span> <span class="n">size</span> <span class="p">(</span><span class="n">points</span><span class="p">)</span>     <span class="mi">14</span>
     <span class="n">stpx</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span>                       <span class="n">scale</span> <span class="n">title</span> <span class="n">x</span><span class="o">-</span><span class="n">pixel</span> <span class="n">position</span>    <span class="mi">140</span>  <span class="mi">1020</span>
     <span class="n">stpy</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span>                       <span class="n">scale</span> <span class="n">title</span> <span class="n">y</span><span class="o">-</span><span class="n">pixel</span> <span class="n">position</span>    <span class="mi">716</span>   <span class="mi">716</span>
     <span class="n">stjs</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span>                                <span class="n">scale</span> <span class="n">title</span> <span class="n">justif</span><span class="o">.</span>      <span class="mi">7</span>     <span class="mi">9</span>
           <span class="n">sfs</span> <span class="o">=</span>                <span class="n">scale</span> <span class="n">annotation</span> <span class="n">font</span> <span class="n">size</span> <span class="p">(</span><span class="n">points</span><span class="p">)</span>     <span class="mi">12</span>
       <span class="n">trnspbg</span> <span class="o">=</span>    <span class="n">logical</span> <span class="n">switch</span> <span class="p">(</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">transparent</span> <span class="n">background</span>      <span class="mi">0</span>
       <span class="n">trnspfg</span> <span class="o">=</span>    <span class="n">logical</span> <span class="n">switch</span> <span class="p">(</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">transparent</span> <span class="n">background</span>      <span class="mi">0</span>
       <span class="n">show</span>    <span class="o">=</span>    <span class="n">logical</span> <span class="n">switch</span> <span class="p">(</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="p">)</span> <span class="n">to</span> <span class="n">display</span> <span class="n">the</span> <span class="n">final</span> <span class="n">image</span>      <span class="mi">1</span>
      <span class="n">imgtype</span> <span class="o">=</span>                 <span class="n">output</span> <span class="n">image</span> <span class="nb">type</span> <span class="mi">1</span><span class="o">=</span><span class="n">jpeg</span><span class="p">,</span> <span class="n">other</span><span class="o">=</span><span class="n">png</span>      <span class="mi">0</span>
       <span class="n">logosx</span><span class="o">=</span> <span class="o">=</span>                               <span class="n">optional</span> <span class="n">logo</span> <span class="n">x</span><span class="o">-</span><span class="n">size</span>    <span class="mi">158</span>
        <span class="n">logosy</span> <span class="o">=</span>                               <span class="n">optional</span> <span class="n">logo</span> <span class="n">y</span><span class="o">-</span><span class="n">size</span>     <span class="mi">50</span>
        <span class="n">logox</span>  <span class="o">=</span>                           <span class="n">optional</span> <span class="n">logo</span> <span class="n">x</span><span class="o">-</span><span class="n">position</span>      <span class="mi">5</span>
        <span class="n">logoy</span>  <span class="o">=</span>                           <span class="n">optional</span> <span class="n">logo</span> <span class="n">y</span><span class="o">-</span><span class="n">position</span>      <span class="mi">5</span>
           <span class="n">day</span> <span class="o">=</span>                        <span class="n">optional</span> <span class="n">day</span> <span class="p">(</span><span class="n">part</span> <span class="n">of</span> <span class="n">date</span><span class="p">)</span>      <span class="mi">1</span>
         <span class="n">month</span> <span class="o">=</span>                      <span class="n">optional</span> <span class="n">month</span> <span class="p">(</span><span class="n">part</span> <span class="n">of</span> <span class="n">date</span><span class="p">)</span>      <span class="mi">4</span>
          <span class="n">year</span> <span class="o">=</span>                       <span class="n">optional</span> <span class="n">year</span> <span class="p">(</span><span class="n">part</span> <span class="n">of</span> <span class="n">date</span><span class="p">)</span>   <span class="mi">1958</span>
          <span class="n">drad</span> <span class="o">=</span>                <span class="n">optional</span> <span class="n">pixel</span> <span class="n">radius</span> <span class="n">of</span> <span class="n">date</span> <span class="n">clock</span>    <span class="mi">100</span>
         <span class="n">dposx</span> <span class="o">=</span>      <span class="n">optional</span> <span class="n">pixel</span> <span class="n">xposition</span> <span class="n">of</span> <span class="n">date</span> <span class="n">clock</span> <span class="n">centre</span>    <span class="mi">100</span>
         <span class="n">dposy</span> <span class="o">=</span>      <span class="n">optional</span> <span class="n">pixel</span> <span class="n">yposition</span> <span class="n">of</span> <span class="n">date</span> <span class="n">clock</span> <span class="n">centre</span>    <span class="mi">100</span>
         <span class="n">annox</span> <span class="o">=</span>             <span class="n">optional</span> <span class="n">pixel</span> <span class="n">xposition</span> <span class="n">of</span> <span class="n">annotation</span>     <span class="mi">15</span>
         <span class="n">annoy</span> <span class="o">=</span>             <span class="n">optional</span> <span class="n">pixel</span> <span class="n">yposition</span> <span class="n">of</span> <span class="n">annotation</span>     <span class="mi">15</span>
         <span class="n">annfs</span> <span class="o">=</span>                      <span class="n">optional</span> <span class="n">annotation</span> <span class="n">font</span><span class="o">-</span><span class="n">size</span>     <span class="mi">11</span>
  <span class="n">fn</span><span class="p">(</span><span class="n">MAX_STR</span><span class="p">)</span>  <span class="o">=</span>                              <span class="n">image</span> <span class="n">output</span> <span class="n">filename</span><span class="p">:</span> <span class="n">example12a</span><span class="o">.</span><span class="n">png</span>
  <span class="n">csn</span><span class="p">(</span><span class="n">MAX_STR</span><span class="p">)</span> <span class="o">=</span>                      <span class="n">colour</span> <span class="n">scale</span> <span class="n">palette</span> <span class="n">filename</span><span class="p">:</span> <span class="o">./</span><span class="n">pals</span><span class="o">/</span><span class="n">pastel2</span><span class="o">.</span><span class="n">pal</span>
 <span class="n">ocsn</span><span class="p">(</span><span class="n">MAX_STR</span><span class="p">)</span> <span class="o">=</span>              <span class="n">overlay</span> <span class="n">colour</span> <span class="n">scale</span> <span class="n">palette</span> <span class="n">filename</span><span class="p">:</span> <span class="o">./</span><span class="n">pals</span><span class="o">/</span><span class="n">seaice</span><span class="o">.</span><span class="n">pal</span>
   <span class="n">bg</span><span class="p">(</span><span class="n">MAX_STR</span><span class="p">)</span> <span class="o">=</span>                                  <span class="n">background</span> <span class="n">colour</span><span class="p">:</span> <span class="n">black</span>
   <span class="n">fg</span><span class="p">(</span><span class="n">MAX_STR</span><span class="p">)</span> <span class="o">=</span>                                  <span class="n">foreground</span> <span class="n">colour</span><span class="p">:</span> <span class="n">white</span>
  <span class="n">abg</span><span class="p">(</span><span class="n">MAX_STR</span><span class="p">)</span> <span class="o">=</span>                      <span class="n">alternative</span> <span class="n">background</span> <span class="n">colour</span><span class="p">:</span> <span class="c1">#9A9A9A</span>
  <span class="n">bbg</span><span class="p">(</span><span class="n">MAX_STR</span><span class="p">)</span> <span class="o">=</span>                           <span class="n">border</span> <span class="n">background</span> <span class="n">colour</span><span class="p">:</span> <span class="c1">#a6a6a6</span>
  <span class="n">bfg</span><span class="p">(</span><span class="n">MAX_STR</span><span class="p">)</span> <span class="o">=</span>                           <span class="n">border</span> <span class="n">foreground</span> <span class="n">colour</span><span class="p">:</span> <span class="n">black</span>
 <span class="n">ttxt</span><span class="p">(</span><span class="n">MAX_STR</span><span class="p">)</span> <span class="o">=</span>                                         <span class="n">title</span> <span class="n">text</span><span class="p">:</span> <span class="n">Sea</span> <span class="n">Surface</span> <span class="n">Temperature</span> <span class="k">with</span> <span class="n">sea</span> <span class="n">ice</span>
 <span class="n">stxt</span><span class="p">(</span><span class="n">MAX_STR</span><span class="p">)</span> <span class="o">=</span>                                   <span class="n">scale</span> <span class="n">title</span> <span class="n">text</span><span class="p">:</span> <span class="n">SST</span>
<span class="n">stxt2</span><span class="p">(</span><span class="n">MAX_STR</span><span class="p">)</span> <span class="o">=</span>                   <span class="n">scale</span> <span class="n">title</span> <span class="n">text</span> <span class="k">for</span> <span class="n">overlay</span> <span class="n">var</span><span class="p">:</span> <span class="n">ice</span> <span class="n">conc</span><span class="o">.</span>
 <span class="n">tfnt</span><span class="p">(</span><span class="n">MAX_STR</span><span class="p">)</span> <span class="o">=</span>                                         <span class="n">title</span> <span class="n">font</span><span class="p">:</span> <span class="n">Handwriting</span><span class="o">---</span><span class="n">Dakota</span>
 <span class="n">sfnt</span><span class="p">(</span><span class="n">MAX_STR</span><span class="p">)</span> <span class="o">=</span>                                         <span class="n">scale</span> <span class="n">font</span><span class="p">:</span> <span class="n">Arial</span>
<span class="n">stfnt</span><span class="p">(</span><span class="n">MAX_STR</span><span class="p">)</span> <span class="o">=</span>                                   <span class="n">scale</span> <span class="n">title</span> <span class="n">font</span><span class="p">:</span> <span class="n">Arial</span>
 <span class="n">logo</span><span class="p">(</span><span class="n">MAX_STR</span><span class="p">)</span> <span class="o">=</span>                                    <span class="n">logo</span> <span class="n">image</span> <span class="n">file</span><span class="p">:</span> <span class="o">./</span><span class="n">data</span><span class="o">/</span><span class="n">NOC_logo</span><span class="o">.</span><span class="n">png</span>
<span class="n">annot</span><span class="p">(</span><span class="n">MAX_STR</span><span class="p">)</span> <span class="o">=</span>                                    <span class="n">annotation</span> <span class="n">text</span><span class="p">:</span>
</pre></div>
</div>
<p>This list contains settings which obviously correspond to values supplied on the command
line (e.g. <code class="docutils literal notranslate"><span class="pre">tfnt</span></code>, <code class="docutils literal notranslate"><span class="pre">wi</span></code>, <code class="docutils literal notranslate"><span class="pre">ht</span></code> etc.) but also contains many other values with less
obvious correspondence and/or default values. Before reviewing the correspondence between
known and yet to be introduced command line options and the entries in this data structure
it is useful to have a pictorial representation of some of the layout variables:</p>
<a class="reference internal image-reference" href="_images/example12b.png"><img alt="_images/example12b.png" class="align-center" src="_images/example12b.png" style="width: 1024.0px; height: 727.0px;" /></a>
<p>This diagram shows how the various layout variables are used to construct the image.
Default values are set as fixed percentages of the main image size (<code class="docutils literal notranslate"><span class="pre">wi</span></code> x <code class="docutils literal notranslate"><span class="pre">ht</span></code>) which
are the arguments given to the <code class="docutils literal notranslate"><span class="pre">-r</span></code> option. The values given to border widths and
heights depend on the selected position for the colourbar. If no colourbar is requested
(<code class="docutils literal notranslate"><span class="pre">-spos</span> <span class="pre">0</span></code> then the default behaviour is to disable all borders. The following table
lists the default settings:</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="21%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">spos</th>
<th class="head">colourbar</th>
<th class="head">bl</th>
<th class="head">br</th>
<th class="head">bb</th>
<th class="head">bt</th>
<th class="head">sbl</th>
<th class="head">sbr</th>
<th class="head">sbb</th>
<th class="head">sbt</th>
</tr>
<tr class="row-even"><th class="head"></th>
<th class="head">position</th>
<th class="head">(%wi)</th>
<th class="head">(%wi)</th>
<th class="head">(%ht)</th>
<th class="head">(%ht)</th>
<th class="head">(%bl)</th>
<th class="head">(%br)</th>
<th class="head">(%bb)</th>
<th class="head">(%bt)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-odd"><td>0</td>
<td>none</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-even"><td>1 or 2</td>
<td>left or right</td>
<td>16</td>
<td>16</td>
<td>12</td>
<td>12</td>
<td>20</td>
<td>70</td>
<td>100</td>
<td>300</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>top</td>
<td>16</td>
<td>16</td>
<td>12</td>
<td>12</td>
<td>300</td>
<td>100</td>
<td>70</td>
<td>20</td>
</tr>
<tr class="row-even"><td>4</td>
<td>bottom</td>
<td>16</td>
<td>16</td>
<td>12</td>
<td>12</td>
<td>100</td>
<td>350</td>
<td>70</td>
<td>20</td>
</tr>
<tr class="row-odd"><td>5 or 7</td>
<td>lhs arc-scale</td>
<td>12</td>
<td>12</td>
<td>12</td>
<td>12</td>
<td>10</td>
<td>30</td>
<td>2</td>
<td>2</td>
</tr>
<tr class="row-even"><td>6 or 8</td>
<td>rhs arc-scale</td>
<td>12</td>
<td>12</td>
<td>12</td>
<td>12</td>
<td>10</td>
<td>30</td>
<td>2</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>Note also that the default positioning of titles and scale labels will also depend on the
image size and choice of scale position. Of the various text font sizes, only the title
text is scaled with image size; and only if the text height would otherwise exceed the
border height. It is therefore always possible to request an image size or aspect ratio
for which the default settings are inappropriate. For these cases, explicit control over
all the layout variables is provided via the command-line options. The next section lists
the options and the corresponding internal variables that they set. For brevity some
options set multiple variables so it may be necessary to supply default values (as given
by the <code class="docutils literal notranslate"><span class="pre">-info</span></code> option) for those components you wish the leave unchanged. See the
‘Setting margins’ section for an example of this.</p>
</div>
<div class="section" id="matching-settings-to-command-line-options">
<h2>3. Matching settings to command-line options<a class="headerlink" href="#matching-settings-to-command-line-options" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="36%" />
<col width="30%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Cmd line option</th>
<th class="head">arguments</th>
<th class="head">description</th>
<th class="head">variables set</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-r</td>
<td>width height</td>
<td>image dimensions in pixels</td>
<td>wi ht</td>
</tr>
<tr class="row-odd"><td>-margins</td>
<td>left right bottom top</td>
<td>margin sizes in pixels</td>
<td>bl  br  bb  bt</td>
</tr>
<tr class="row-even"><td>-Margins</td>
<td>left% right% bottom% top%</td>
<td>margin sizes as percentages</td>
<td>bl  br  bb  bt</td>
</tr>
<tr class="row-odd"><td>-smargins</td>
<td>left right bottom top</td>
<td>margin sizes in pixels</td>
<td>sbl sbr sbb sbt</td>
</tr>
<tr class="row-even"><td>-Smargins</td>
<td>left% right% bottom% top%</td>
<td>margin sizes as percentages</td>
<td>sbl sbr sbb sbt</td>
</tr>
<tr class="row-odd"><td>-title</td>
<td>title_text</td>
<td>title text</td>
<td>ttxt</td>
</tr>
<tr class="row-even"><td>-tpos</td>
<td>title_xpos title_ypos</td>
<td>title position</td>
<td>tpx tpy</td>
</tr>
<tr class="row-odd"><td>-tjus</td>
<td>title_text_justification</td>
<td>title justification</td>
<td>tjs</td>
</tr>
<tr class="row-even"><td>-tfnt</td>
<td>title_font</td>
<td>title font</td>
<td>tfnt</td>
</tr>
<tr class="row-odd"><td>-tfs</td>
<td>title_font_pointsize</td>
<td>title font-size (points)</td>
<td>tfs</td>
</tr>
<tr class="row-even"><td>-stitle</td>
<td>scale_title_text</td>
<td>scale title text</td>
<td>stxt</td>
</tr>
<tr class="row-odd"><td>-stpos</td>
<td>scale_title_xpos scale_title_ypos</td>
<td>scale title position</td>
<td>stpx(1) stpy(1)</td>
</tr>
<tr class="row-even"><td>-stjus</td>
<td>scale_title_text_justification</td>
<td>scale title justification</td>
<td>stjs(1)</td>
</tr>
<tr class="row-odd"><td>-stitle2</td>
<td>2nd_scale_title_text</td>
<td>2nd scale title text</td>
<td>stxt2</td>
</tr>
<tr class="row-even"><td>-stpos2</td>
<td>2nd_scale_title_x 2nd_scale_title_y</td>
<td>2nd scale title position</td>
<td>stpx(2) stpy(2)</td>
</tr>
<tr class="row-odd"><td>-stjus2</td>
<td>2nd_scale_title_text_justification</td>
<td>2nd scale title justification</td>
<td>stjs(2)</td>
</tr>
<tr class="row-even"><td>-stfnt</td>
<td>scale_title_font</td>
<td>scale title font</td>
<td>stfnt</td>
</tr>
<tr class="row-odd"><td>-stfs</td>
<td>title_font_pointsize</td>
<td>scale title font-size (points)</td>
<td>stfs</td>
</tr>
<tr class="row-even"><td>-sfnt</td>
<td>scale_font</td>
<td>scale number font</td>
<td>sfnt</td>
</tr>
<tr class="row-odd"><td>-sfs</td>
<td>scale_font_pointsize</td>
<td>scale number font-size</td>
<td>sfs</td>
</tr>
<tr class="row-even"><td>-logo</td>
<td>logo_image_file</td>
<td>logo image file</td>
<td>logo</td>
</tr>
<tr class="row-odd"><td>-lsize</td>
<td>logo_width logo_height</td>
<td>logo size limits</td>
<td>logosx logosy</td>
</tr>
<tr class="row-even"><td>-lpos</td>
<td>logo_xpos logo_ypos</td>
<td>logo position (top-left)</td>
<td>logox logoy</td>
</tr>
<tr class="row-odd"><td>-annotate</td>
<td>xpos ypos label_text</td>
<td>optional extra annotation</td>
<td>annox annoy annot</td>
</tr>
<tr class="row-even"><td>-afs</td>
<td>annotation-font-size</td>
<td>extra annotation font-size</td>
<td>annfs</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="setting-margins">
<h2>4. Setting margins<a class="headerlink" href="#setting-margins" title="Permalink to this headline">¶</a></h2>
<p>The previous sections have shown how the image layout is controlled by various parameters,
how to query what the default or current settings are for these parameters and finally how
the available commad-line options relate to these parameters. Armed with this information,
it is now possible to take control over the layout and refine images according to need or
personal taste.</p>
<p>As a first example, consider a desire to reduce the external white space around the image
whilst retaining all other relative sizes and positions. The obvious approach is to use
either the <code class="docutils literal notranslate"><span class="pre">-margins</span></code> (absolute pixel values) or <code class="docutils literal notranslate"><span class="pre">-Margins</span></code> (% of image dimensions)
option to set new border sizes. This will work in the bottom border case where all the
default settings based on <code class="docutils literal notranslate"><span class="pre">bb</span></code> (<code class="docutils literal notranslate"><span class="pre">sbb</span></code>, <code class="docutils literal notranslate"><span class="pre">stpx,</span> <span class="pre">stpy</span></code>) will adjust correctly. The top
border can also be reduced safely so long as care is taken to leave sufficient height to
accommodate the logo height. However, changes to the side borders will change the
appearance of the colorbars unless compensating changes are made to the scale margins (via
<code class="docutils literal notranslate"><span class="pre">-smargins</span></code> or <code class="docutils literal notranslate"><span class="pre">-Smargins</span></code>). This is best demonstrated by a naive example to reduce
all margins ( remembering their default values in this case are equivalent to <code class="docutils literal notranslate"><span class="pre">-margins</span>
<span class="pre">140</span> <span class="pre">140</span> <span class="pre">76</span> <span class="pre">76</span></code> ):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">nemosim</span> <span class="o">-</span><span class="k">as</span> <span class="n">example12a</span><span class="o">.</span><span class="n">png</span> <span class="o">-</span><span class="n">o</span> <span class="n">example12c</span><span class="o">.</span><span class="n">png</span> <span class="o">-</span><span class="n">margins</span> <span class="mi">80</span> <span class="mi">80</span> <span class="mi">42</span> <span class="mi">42</span>
</pre></div>
</div>
<p>To see the differences it is best to view this new image (left) alongside the orginal
(right):</p>
<a class="reference internal image-reference" href="_images/example12c.png"><img alt="_images/example12c.png" class="align-center" src="_images/example12c.png" style="width: 520.0px; height: 362.0px;" /></a>
<a class="reference internal image-reference" href="_images/example12a.png"><img alt="_images/example12a.png" class="align-center" src="_images/example12a.png" style="width: 580.0px; height: 396.0px;" /></a>
<p>Mostly, the required result has been achieved but note the thinning and stretching of the
colurbars and the slight vertical displacement of the title relative to the main image.</p>
</div>
<div class="section" id="using-scale-margins-to-control-colourbars">
<h2>5. Using scale margins to control colourbars<a class="headerlink" href="#using-scale-margins-to-control-colourbars" title="Permalink to this headline">¶</a></h2>
<p>The original colourbars can be restored by noting that the thickness and length of the
colourbar are given by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">width</span>  <span class="o">=</span> <span class="n">bl</span> <span class="o">-</span> <span class="n">sbr</span> <span class="o">-</span> <span class="n">sbl</span>
<span class="n">length</span> <span class="o">=</span> <span class="n">ht</span> <span class="o">+</span> <span class="n">bb</span> <span class="o">+</span> <span class="n">bt</span> <span class="o">-</span> <span class="n">sbt</span> <span class="o">-</span> <span class="n">sbb</span>
</pre></div>
</div>
<p>which, for the original image, compute as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">width</span>  <span class="o">=</span> <span class="mi">140</span> <span class="o">-</span> <span class="mi">28</span> <span class="o">-</span> <span class="mi">98</span>            <span class="o">=</span> <span class="mi">14</span>
<span class="n">length</span> <span class="o">=</span> <span class="mi">640</span> <span class="o">+</span> <span class="mi">76</span> <span class="o">+</span> <span class="mi">76</span> <span class="o">-</span> <span class="mi">76</span> <span class="o">-</span> <span class="mi">226</span> <span class="o">=</span> <span class="mi">490</span>
</pre></div>
</div>
<p>Thus these settings could be used to restore the original dimensions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">nemosim</span> <span class="o">-</span><span class="k">as</span> <span class="n">example12a</span><span class="o">.</span><span class="n">png</span> <span class="o">-</span><span class="n">o</span> <span class="n">example12d</span><span class="o">.</span><span class="n">png</span> <span class="o">-</span><span class="n">margins</span> <span class="mi">80</span> <span class="mi">80</span> <span class="mi">42</span> <span class="mi">42</span> <span class="o">-</span><span class="n">smargins</span> <span class="mi">14</span> <span class="mi">52</span> <span class="mi">42</span> <span class="mi">192</span>
</pre></div>
</div>
<p>since:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">width</span>  <span class="o">=</span> <span class="mi">80</span> <span class="o">-</span> <span class="mi">14</span> <span class="o">-</span> <span class="mi">52</span>             <span class="o">=</span> <span class="mi">14</span>
<span class="n">length</span> <span class="o">=</span> <span class="mi">640</span> <span class="o">+</span> <span class="mi">42</span> <span class="o">+</span> <span class="mi">42</span> <span class="o">-</span> <span class="mi">42</span> <span class="o">-</span> <span class="mi">192</span> <span class="o">=</span> <span class="mi">490</span>
</pre></div>
</div>
<p>Now compare this new image (left) alongside the orginal (right):</p>
<a class="reference internal image-reference" href="_images/example12d.png"><img alt="_images/example12d.png" class="align-center" src="_images/example12d.png" style="width: 520.0px; height: 362.0px;" /></a>
<a class="reference internal image-reference" href="_images/example12a.png"><img alt="_images/example12a.png" class="align-center" src="_images/example12a.png" style="width: 580.0px; height: 396.0px;" /></a>
<p>Of course it is rarely necessary to match these dimensions precisely but the capability is
there if required. Note similar calculations may be necessary if trying to match sizes for
horizontal colourscales. In these cases the relevant widths and lengths will be given by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">length</span>  <span class="o">=</span> <span class="n">wi</span> <span class="o">+</span> <span class="n">bl</span> <span class="o">+</span> <span class="n">br</span> <span class="o">-</span> <span class="n">sbl</span> <span class="o">-</span> <span class="n">sbr</span>
<span class="n">width</span>   <span class="o">=</span> <span class="n">bb</span> <span class="o">-</span> <span class="n">sbb</span> <span class="o">-</span> <span class="n">sbt</span>   <span class="ow">or</span>   <span class="n">bt</span> <span class="o">-</span> <span class="n">sbb</span> <span class="o">-</span> <span class="n">sbt</span>
</pre></div>
</div>
</div>
<div class="section" id="label-placement-and-text-justification">
<h2>6. Label placement and text justification<a class="headerlink" href="#label-placement-and-text-justification" title="Permalink to this headline">¶</a></h2>
<p>The default positions of the title and scale titles will depend on the choice of
colourscale position. The following table summarises the defaults. Note that all pixel
coordinates are measured from the top left corner with y positive downwards. Firstly for
the main title:</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="23%" />
<col width="23%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">scale position</th>
<th class="head">main title x</th>
<th class="head">main title y</th>
<th class="head">justification</th>
</tr>
<tr class="row-even"><th class="head">(spos)</th>
<th class="head">tpx</th>
<th class="head">tpy</th>
<th class="head">tjs</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-odd"><td>1, 2, 3, 7 or 8</td>
<td>bl+0.5*wi</td>
<td>0.85*bt</td>
<td>2</td>
</tr>
<tr class="row-even"><td>4, 5, or 6</td>
<td>bl+0.5*wi</td>
<td>bt+ht+0.85*bb</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>and, secondly for the scale title. Note the second scale title (if present) will
automatically take values for the opposite margin to that of the first:</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="23%" />
<col width="23%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">scale position</th>
<th class="head">scale title x</th>
<th class="head">scale title y</th>
<th class="head">justification</th>
</tr>
<tr class="row-even"><th class="head">(spos)</th>
<th class="head">stpx(:)</th>
<th class="head">stpy(:)</th>
<th class="head">stjs(:)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-odd"><td>1, 3 or 7</td>
<td>bl</td>
<td>ht+bt</td>
<td>7</td>
</tr>
<tr class="row-even"><td>5</td>
<td>bl</td>
<td>0.25*bt</td>
<td>7</td>
</tr>
<tr class="row-odd"><td>2 or 8</td>
<td>wi+bl</td>
<td>ht+bt</td>
<td>9</td>
</tr>
<tr class="row-even"><td>4 or 6</td>
<td>wi+bl</td>
<td>0.25*bt</td>
<td>9</td>
</tr>
</tbody>
</table>
<p>The default label placements will not suit all uses but these values are easily
over-ridden using the <code class="docutils literal notranslate"><span class="pre">-tpos</span></code> and  <code class="docutils literal notranslate"><span class="pre">-tjus</span></code> options for the main title and the
<code class="docutils literal notranslate"><span class="pre">-stpos</span></code>, <code class="docutils literal notranslate"><span class="pre">-stjus</span></code> and <code class="docutils literal notranslate"><span class="pre">-stpos2</span></code>, <code class="docutils literal notranslate"><span class="pre">-stjus2</span></code> paired options for the scale titles.</p>
<p>Nine text justification options are provided as illustrated in this diagram:</p>
<a class="reference internal image-reference" href="_images/justification.png"><img alt="_images/justification.png" class="align-center" src="_images/justification.png" style="width: 667.2px; height: 124.8px;" /></a>
<p>where the blue dot represents a fixed <code class="docutils literal notranslate"><span class="pre">-tpos</span></code> coordinate with varying text justification
choices and the red rectangle shows the computed boundary text box.  Note that the use of
these justification points depends on the <cite>ImageMagick</cite> calculation of text fontmetrics
which provide a correctly sized bounding box for the text but not the box’s position.
Consequently, there is scope for slight misplacement as demonstrated in the example above
that does not bound the descending p correctly.  Generally, though the method is accurate
enough for an approximate placement that can be refined, if neccessary, within one
iteration.</p>
</div>
<div class="section" id="text-fonts">
<h2>7. Text fonts<a class="headerlink" href="#text-fonts" title="Permalink to this headline">¶</a></h2>
<p>Each <cite>ImageMagick</cite> installation will have access to a variety of fonts. The exact list
available will depend on the installation and may not even include all the fonts used in
this cookbook. The <cite>ImageMagick</cite> utilities can be used to obtain a list of the available
fonts:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">identify</span> <span class="o">-</span><span class="nb">list</span> <span class="n">font</span> <span class="o">|</span> <span class="n">grep</span> <span class="s1">&#39;Font:&#39;</span> <span class="o">|</span> <span class="n">sed</span> <span class="o">-</span><span class="n">e</span> <span class="s1">&#39;s/.*: //&#39;</span> <span class="o">&gt;</span> <span class="n">fontlist</span>

<span class="n">cat</span> <span class="n">fontlist</span>
<span class="n">AvantGarde</span><span class="o">-</span><span class="n">Book</span>
<span class="n">AvantGarde</span><span class="o">-</span><span class="n">BookOblique</span>
<span class="n">AvantGarde</span><span class="o">-</span><span class="n">Demi</span>
<span class="n">AvantGarde</span><span class="o">-</span><span class="n">DemiOblique</span>
<span class="n">Bookman</span><span class="o">-</span><span class="n">Demi</span>
<span class="n">Bookman</span><span class="o">-</span><span class="n">DemiItalic</span>
<span class="n">Bookman</span><span class="o">-</span><span class="n">Light</span>
<span class="n">Bookman</span><span class="o">-</span><span class="n">LightItalic</span>
<span class="n">Courier</span><span class="o">-</span><span class="n">BoldOblique</span>
<span class="o">.</span>
<span class="o">.</span>
<span class="n">Yuppy</span><span class="o">-</span><span class="n">SC</span><span class="o">-</span><span class="n">Regular</span>
<span class="n">Yuppy</span><span class="o">-</span><span class="n">TC</span><span class="o">-</span><span class="n">Regular</span>
<span class="n">Zapf</span><span class="o">-</span><span class="n">Dingbats</span>
<span class="n">Zapfino</span>
<span class="n">ヒラギノ丸ゴ</span><span class="o">-</span><span class="n">Pro</span><span class="o">-</span><span class="n">W4</span>
<span class="n">ヒラギノ丸ゴ</span><span class="o">-</span><span class="n">ProN</span><span class="o">-</span><span class="n">W4</span>
<span class="n">ヒラギノ角ゴ</span><span class="o">-</span><span class="n">StdN</span><span class="o">-</span><span class="n">W8</span>
</pre></div>
</div>
<p>The list can be long and not particularly useful unless you are just looking to confirm
the presence of a known font. As an alternative, the <code class="docutils literal notranslate"><span class="pre">bin/fontimg.sh</span></code> script is provided
to supply a visual illustration of the available fonts. In its basic form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">bin</span><span class="o">/</span><span class="n">fontimg</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>will create a fontlist listing (using the identify command above) and then will produce
one or more images (depending on the number of entries in fontlist) in which the entries
are numbered and listed using their own fonts. Subsequent invocations of fontimg.sh can be
made with numeric arguments corresponding to list positions. In these cases an enlarged
view of the listed fonts will be produced. This secondary usage can be used in a single
step to view known font families. For example, say you only wish to view the verdana fonts
available on your system, then:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>bin/fontimg.sh `grep -n -i verdana fontlist | sed -e&#39;s/:.*$//&#39;`
</pre></div>
</div>
<p>will produce a series of <code class="docutils literal notranslate"><span class="pre">onefontNNN.png</span></code> images such as these four:</p>
<a class="reference internal image-reference" href="_images/example13a.png"><img alt="_images/example13a.png" class="align-center" src="_images/example13a.png" style="width: 800.0px; height: 320.0px;" /></a>
<p>All the available fonts can be used for titles and scale labels by naming the required
font via the <code class="docutils literal notranslate"><span class="pre">-tfnt</span></code> (title font) <code class="docutils literal notranslate"><span class="pre">-stfnt</span></code> (scale title font) <code class="docutils literal notranslate"><span class="pre">-sfnt</span></code> (scale font)
options. In all cases the argument is the full string given in the fontlist listing. These
strings will most often need to be quoted due to the presence of hyphens. [TBD need
<code class="docutils literal notranslate"><span class="pre">-afnt</span></code> option to control annotation font too].</p>
</div>
<div class="section" id="logo-placement-and-sizing">
<h2>8. Logo placement and sizing<a class="headerlink" href="#logo-placement-and-sizing" title="Permalink to this headline">¶</a></h2>
<p>A facility is provided for an external image to be read and overlaid in any position on
the working canvas. This is intended for adding a single logo and works best with png
images using a transparent background.  The <cite>ImageMagick</cite> tool, <code class="docutils literal notranslate"><span class="pre">composite</span></code>, should be
used for more complex compositing of multiple images. The following three command-line
options and arguments determine the source image, size and placement:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-logo</span> <span class="pre">logo_image_file</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">-lsize</span> <span class="pre">x_pixel_size</span> <span class="pre">y_pixel_size</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">-lpos</span> <span class="pre">x_pixel_position</span> <span class="pre">y_pixel_position</span></code> (bottom left corner)</li>
</ul>
<p>The simple ratio scaling algorithm used will maintain the aspect ratio of the logo so the
resultant logo size may not be exactly that requested by the <code class="docutils literal notranslate"><span class="pre">-lsize</span></code> arguments. The
actual size will be determined by the limiting dimension. For example, if the logo source
image is 511x113, a  requested size of 158x50 will provide a 158x35 pixel-sized logo.
Whereas a requested size of 300x50 will provide a 226x50 pixel-sized logo.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="nscookbook5.html" title="NEMOSIM - Cook book (5)"
             >next</a> |</li>
        <li class="right" >
          <a href="nscookbook3.html" title="NEMOSIM - Cook book (3)"
             >previous</a> |</li>
        <li><a href="index.html">home</a>|&nbsp;</li>
        <li><a href="search.html">search</a>|&nbsp;</li>
       <li><a href="contents.html">documentation </a> &raquo;</li>
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Andrew C. Coward, National Oceanography Centre, UK.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>